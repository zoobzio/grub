---
title: Grub Overview
description: A provider-agnostic CRUD interface for Go with built-in observability
author: zoobzio
published: 2025-12-17
updated: 2025-12-17
tags:
  - overview
  - introduction
  - getting-started
---

# Grub

Storage in Go often means choosing between vendor lock-in or maintaining multiple implementations. Grub offers a third path: a unified CRUD interface that abstracts storage backends while preserving type safety and providing first-class observability through [Capitan](https://github.com/zoobzio/capitan).

```go
// Define your model
type User struct {
    ID    string `json:"id"`
    Name  string `json:"name"`
    Email string `json:"email"`
}

// Create a service with any provider
svc := grub.New[User](provider)

// Type-safe CRUD operations
user := User{ID: "usr-123", Name: "Alice", Email: "alice@example.com"}
err := svc.Set(ctx, user.ID, user)

retrieved, err := svc.Get(ctx, "usr-123")  // retrieved is *User
```

## Why Grub?

**Write once, deploy anywhere.** Your application logic remains unchanged whether you're using Redis for caching, S3 for documents, or DynamoDB for serverless workloads. Switch backends with a single line change.

**Type-safe by design.** Generic services provide compile-time type checking. No more `interface{}` assertions or runtime type errors.

**Observable out of the box.** Every operation emits structured events via Capitan, giving you metrics, tracing, and logging without additional instrumentation.

**Lifecycle management.** First-class support for connection pooling, health checks, and graceful shutdown across all providers.

## Supported Providers

| Provider | Type | Best For |
|----------|------|----------|
| [Redis](3.guides/1.providers.md#redis) | In-memory | Caching, sessions |
| [S3](3.guides/1.providers.md#s3) | Object storage | Documents, media |
| [MongoDB](3.guides/1.providers.md#mongodb) | Document DB | Flexible schemas |
| [DynamoDB](3.guides/1.providers.md#dynamodb) | Serverless | Auto-scaling workloads |
| [Firestore](3.guides/1.providers.md#firestore) | Document DB | Real-time sync |
| [GCS](3.guides/1.providers.md#gcs) | Object storage | Google Cloud workloads |
| [Azure Blob](3.guides/1.providers.md#azure) | Object storage | Azure workloads |
| [BoltDB](3.guides/1.providers.md#boltdb) | Embedded | Local persistence |
| [BadgerDB](3.guides/1.providers.md#badgerdb) | Embedded | High-performance local |

## Core Concepts

Grub is built around three key abstractions:

### Provider

The storage backend. Providers implement raw byte operations (Get, Set, Delete, Exists, List, Count) and lifecycle management (Connect, Close, Health). You configure a provider once and pass it to services.

```go
// Redis provider with key prefix
provider := redis.New(redisClient, "myapp:")

// S3 provider scoped to bucket and prefix
provider := s3.New(s3Client, "my-bucket", "data/")
```

### Service

The typed interface for your application. Services wrap providers with serialization (via Codecs) and observability. One provider can back multiple services for different record types.

```go
users := grub.New[User](provider)
orders := grub.New[Order](provider)
```

### Lifecycle

Connection management for providers. All providers implement Connect, Close, and Health methods for proper resource management and health monitoring.

```go
// Health check for load balancer
if err := provider.Health(ctx); err != nil {
    return unhealthy
}

// Graceful shutdown
defer provider.Close(ctx)
```

## Quick Example

```go
package main

import (
    "context"
    "log"

    "github.com/redis/go-redis/v9"
    "github.com/zoobzio/grub"
    grubRedis "github.com/zoobzio/grub/pkg/redis"
)

type Session struct {
    UserID    string `json:"user_id"`
    Token     string `json:"token"`
    ExpiresAt int64  `json:"expires_at"`
}

func main() {
    ctx := context.Background()

    // Configure Redis client
    client := redis.NewClient(&redis.Options{Addr: "localhost:6379"})

    // Create provider and service
    provider := grubRedis.New(client, "sessions:")
    sessions := grub.New[Session](provider)

    // Health check
    if err := provider.Health(ctx); err != nil {
        log.Fatal("Redis unhealthy:", err)
    }

    // Store a session
    session := Session{
        UserID:    "usr-456",
        Token:     "abc123",
        ExpiresAt: 1735689600,
    }
    if err := sessions.Set(ctx, session.Token, session); err != nil {
        log.Fatal("Failed to store session:", err)
    }

    // Retrieve it
    retrieved, err := sessions.Get(ctx, "abc123")
    if err != nil {
        log.Fatal("Failed to get session:", err)
    }
    log.Printf("Session for user: %s", retrieved.UserID)

    // Cleanup
    provider.Close(ctx)
}
```

## Documentation

- **[Quickstart](2.learn/1.quickstart.md)** - Get running in 5 minutes
- **[Concepts](2.learn/2.concepts.md)** - Understand providers, services, and codecs
- **[Architecture](2.learn/3.architecture.md)** - How grub is structured internally

### Guides

- **[Providers](3.guides/1.providers.md)** - Configuring each storage backend
- **[Lifecycle](3.guides/2.lifecycle.md)** - Connection management and health checks
- **[Pagination](3.guides/3.pagination.md)** - Cursor-based listing patterns
- **[Testing](3.guides/4.testing.md)** - Using the mock provider
- **[Best Practices](3.guides/5.best-practices.md)** - Production recommendations

### Cookbook

- **[Caching](4.cookbook/1.caching.md)** - Cache-aside patterns with Redis
- **[Migrations](4.cookbook/2.migrations.md)** - Moving data between providers
- **[Multi-tenant](4.cookbook/3.multi-tenant.md)** - Tenant isolation strategies

### Reference

- **[API Reference](5.reference/1.api.md)** - Complete interface documentation
- **[Provider Reference](5.reference/2.providers.md)** - Provider-specific details

## Installation

```bash
# Core package
go get github.com/zoobzio/grub

# Provider packages (install only what you need)
go get github.com/zoobzio/grub/pkg/redis
go get github.com/zoobzio/grub/pkg/s3
go get github.com/zoobzio/grub/pkg/mongo
go get github.com/zoobzio/grub/pkg/dynamo
go get github.com/zoobzio/grub/pkg/firestore
go get github.com/zoobzio/grub/pkg/gcs
go get github.com/zoobzio/grub/pkg/azure
go get github.com/zoobzio/grub/pkg/bolt
go get github.com/zoobzio/grub/pkg/badger
```

## Related Projects

- **[Capitan](https://github.com/zoobzio/capitan)** - Event-driven observability (used by grub for signals)
- **[Sentinel](https://github.com/zoobzio/sentinel)** - Runtime reflection utilities (used for model metadata)
