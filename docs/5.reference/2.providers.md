---
title: Provider Reference
description: Provider-specific API details and configuration
author: zoobzio
published: 2025-12-17
updated: 2025-12-17
tags:
  - reference
  - providers
  - configuration
---

# Provider Reference

Detailed API documentation for each grub provider.

## Redis

**Package:** `github.com/zoobzio/grub/pkg/redis`

### Constructor

```go
func New(client Client, prefix string) *Provider
```

**Parameters:**
- `client`: Redis client implementing the Client interface
- `prefix`: Key prefix for all operations

### Client Interface

```go
type Client interface {
    Get(ctx context.Context, key string) *redis.StringCmd
    Set(ctx context.Context, key string, value any, expiration time.Duration) *redis.StatusCmd
    Exists(ctx context.Context, keys ...string) *redis.IntCmd
    Del(ctx context.Context, keys ...string) *redis.IntCmd
    Scan(ctx context.Context, cursor uint64, match string, count int64) *redis.ScanCmd
    Ping(ctx context.Context) *redis.StatusCmd
    Close() error
}
```

Compatible with `*redis.Client` and `*redis.ClusterClient`.

### Behavior

| Operation | Redis Command | Notes |
|-----------|---------------|-------|
| Get | GET | Returns bytes |
| Set | SET | No TTL by default |
| Exists | EXISTS | Single key check |
| Count | SCAN + count | Iterates all matching keys |
| List | SCAN | Cursor-based pagination |
| Delete | DEL | Returns ErrNotFound if 0 deleted |
| Health | PING | |
| Close | Close() | Closes client connection |

### Cursor Format

Cursors are Redis SCAN cursors serialized as decimal strings (e.g., `"12345"`).

---

## S3

**Package:** `github.com/zoobzio/grub/pkg/s3`

### Constructor

```go
func New(client Client, bucket, prefix string) *Provider
```

**Parameters:**
- `client`: S3 client implementing the Client interface
- `bucket`: S3 bucket name
- `prefix`: Object key prefix

### Client Interface

```go
type Client interface {
    GetObject(ctx context.Context, params *s3.GetObjectInput, optFns ...func(*s3.Options)) (*s3.GetObjectOutput, error)
    PutObject(ctx context.Context, params *s3.PutObjectInput, optFns ...func(*s3.Options)) (*s3.PutObjectOutput, error)
    HeadObject(ctx context.Context, params *s3.HeadObjectInput, optFns ...func(*s3.Options)) (*s3.HeadObjectOutput, error)
    HeadBucket(ctx context.Context, params *s3.HeadBucketInput, optFns ...func(*s3.Options)) (*s3.HeadBucketOutput, error)
    DeleteObject(ctx context.Context, params *s3.DeleteObjectInput, optFns ...func(*s3.Options)) (*s3.DeleteObjectOutput, error)
    ListObjectsV2(ctx context.Context, params *s3.ListObjectsV2Input, optFns ...func(*s3.Options)) (*s3.ListObjectsV2Output, error)
}
```

Compatible with `*s3.Client`.

### Behavior

| Operation | S3 API | Notes |
|-----------|--------|-------|
| Get | GetObject | Reads entire object |
| Set | PutObject | Creates/overwrites |
| Exists | HeadObject | Checks object metadata |
| Count | ListObjectsV2 | Iterates all objects |
| List | ListObjectsV2 | Uses continuation tokens |
| Delete | DeleteObject | Checks existence first |
| Health | HeadBucket | Verifies bucket exists |
| Close | No-op | HTTP client needs no cleanup |

### Cursor Format

S3 continuation tokens (opaque strings from AWS).

---

## MongoDB

**Package:** `github.com/zoobzio/grub/pkg/mongo`

### Constructor

```go
func New(collection *mongo.Collection) *Provider
```

**Parameters:**
- `collection`: MongoDB collection

### Document Structure

```json
{
    "_id": "<key>",
    "data": <binary>
}
```

### Behavior

| Operation | MongoDB Operation | Notes |
|-----------|-------------------|-------|
| Get | FindOne | By _id |
| Set | ReplaceOne | With upsert |
| Exists | CountDocuments | Limit 1 |
| Count | CountDocuments | All documents |
| List | Find | Sorted by _id |
| Delete | DeleteOne | By _id |
| Health | Ping | |
| Close | Disconnect | Closes client |

### Cursor Format

Last document `_id` from previous page.

---

## DynamoDB

**Package:** `github.com/zoobzio/grub/pkg/dynamo`

### Constructor

```go
func New(client Client, tableName string) *Provider
```

**Parameters:**
- `client`: DynamoDB client implementing the Client interface
- `tableName`: DynamoDB table name

### Table Requirements

- Partition key: `pk` (String)

### Item Structure

```json
{
    "pk": "<key>",
    "data": <binary>
}
```

### Client Interface

```go
type Client interface {
    GetItem(ctx context.Context, params *dynamodb.GetItemInput, optFns ...func(*dynamodb.Options)) (*dynamodb.GetItemOutput, error)
    PutItem(ctx context.Context, params *dynamodb.PutItemInput, optFns ...func(*dynamodb.Options)) (*dynamodb.PutItemOutput, error)
    DeleteItem(ctx context.Context, params *dynamodb.DeleteItemInput, optFns ...func(*dynamodb.Options)) (*dynamodb.DeleteItemOutput, error)
    Scan(ctx context.Context, params *dynamodb.ScanInput, optFns ...func(*dynamodb.Options)) (*dynamodb.ScanOutput, error)
    DescribeTable(ctx context.Context, params *dynamodb.DescribeTableInput, optFns ...func(*dynamodb.Options)) (*dynamodb.DescribeTableOutput, error)
}
```

### Behavior

| Operation | DynamoDB Operation | Notes |
|-----------|-------------------|-------|
| Get | GetItem | By pk |
| Set | PutItem | Creates/overwrites |
| Exists | GetItem | Projection: pk only |
| Count | Scan | With SELECT COUNT |
| List | Scan | Pagination via LastEvaluatedKey |
| Delete | DeleteItem | Checks existence first |
| Health | DescribeTable | |
| Close | No-op | HTTP client needs no cleanup |

### Cursor Format

Partition key value from LastEvaluatedKey.

---

## Firestore

**Package:** `github.com/zoobzio/grub/pkg/firestore`

### Constructor

```go
func New(client *firestore.Client, collection string) *Provider
```

**Parameters:**
- `client`: Firestore client
- `collection`: Collection name

### Document Structure

Document ID is the key. Document contains:
```json
{
    "data": <bytes>
}
```

### Behavior

| Operation | Firestore Operation | Notes |
|-----------|---------------------|-------|
| Get | Doc.Get | By document ID |
| Set | Doc.Set | Creates/overwrites |
| Exists | Doc.Get | Checks doc.Exists() |
| Count | Documents.GetAll | Fetches all docs |
| List | Query.Documents | OrderBy DocumentID |
| Delete | Doc.Delete | Checks existence first |
| Health | Documents.Next | Lists 1 doc |
| Close | Client.Close | |

### Cursor Format

Document ID from previous page.

---

## GCS

**Package:** `github.com/zoobzio/grub/pkg/gcs`

### Constructor

```go
func New(client *storage.Client, bucket, prefix string) *Provider
```

**Parameters:**
- `client`: GCS client
- `bucket`: Bucket name
- `prefix`: Object prefix

### Behavior

| Operation | GCS Operation | Notes |
|-----------|---------------|-------|
| Get | Object.NewReader | Reads entire object |
| Set | Object.NewWriter | Creates/overwrites |
| Exists | Object.Attrs | |
| Count | Bucket.Objects | Iterates all |
| List | Bucket.Objects | Iterator-based |
| Delete | Object.Delete | Checks existence first |
| Health | Bucket.Attrs | |
| Close | Client.Close | |

### Cursor Format

Object name (for seeking in iterator).

---

## Azure Blob

**Package:** `github.com/zoobzio/grub/pkg/azure`

### Constructor

```go
func New(client *azblob.Client, containerName, prefix string) *Provider
```

**Parameters:**
- `client`: Azure Blob client
- `containerName`: Container name
- `prefix`: Blob prefix

### Behavior

| Operation | Azure Operation | Notes |
|-----------|-----------------|-------|
| Get | DownloadStream | |
| Set | UploadBuffer | |
| Exists | DownloadStream | Range: 0-1 |
| Count | NewListBlobsFlatPager | Iterates all |
| List | NewListBlobsFlatPager | Pager-based |
| Delete | DeleteBlob | Checks existence first |
| Health | GetProperties | Container properties |
| Close | No-op | HTTP client |

### Cursor Format

Azure continuation marker.

---

## BoltDB

**Package:** `github.com/zoobzio/grub/pkg/bolt`

### Constructor

```go
func New(db *bolt.DB, bucket string) (*Provider, error)
```

**Parameters:**
- `db`: BoltDB database
- `bucket`: Bucket name (created if not exists)

**Returns:**
- `*Provider`: The provider
- `error`: If bucket creation fails

### Behavior

| Operation | BoltDB Operation | Notes |
|-----------|------------------|-------|
| Get | Bucket.Get | Within View txn |
| Set | Bucket.Put | Within Update txn |
| Exists | Bucket.Get | nil check |
| Count | Bucket.Stats | KeyN field |
| List | Cursor.Seek/Next | |
| Delete | Bucket.Delete | Checks existence |
| Health | View | Empty transaction |
| Close | DB.Close | |

### Cursor Format

Key name (for Cursor.Seek).

---

## BadgerDB

**Package:** `github.com/zoobzio/grub/pkg/badger`

### Constructor

```go
func New(db *badger.DB, prefix string) *Provider
```

**Parameters:**
- `db`: BadgerDB database
- `prefix`: Key prefix

### Behavior

| Operation | BadgerDB Operation | Notes |
|-----------|-------------------|-------|
| Get | Txn.Get | Within View |
| Set | Txn.Set | Within Update |
| Exists | Txn.Get | ErrKeyNotFound check |
| Count | Iterator | Prefix scan |
| List | Iterator | Prefix + Seek |
| Delete | Txn.Delete | Checks existence |
| Health | View | Empty transaction |
| Close | DB.Close | |

### Cursor Format

Key name (for Iterator.Seek).

---

## Provider Comparison

| Feature | Redis | S3 | MongoDB | DynamoDB | Firestore | GCS | Azure | BoltDB | BadgerDB |
|---------|-------|----|---------|---------|-----------|----|-------|--------|----------|
| Latency | μs | ms | ms | ms | ms | ms | ms | μs | μs |
| Scale | Medium | Unlimited | High | Unlimited | High | Unlimited | Unlimited | Single | Single |
| Embedded | No | No | No | No | No | No | No | Yes | Yes |
| TTL Support | Native | No | Manual | TTL attr | No | No | No | No | TTL attr |
| Transactions | Limited | No | Yes | Yes | Yes | No | No | Yes | Yes |

---

## See Also

- **[Providers Guide](../3.guides/1.providers.md)** - Configuration examples
- **[API Reference](1.api.md)** - Interface documentation
- **[Lifecycle Guide](../3.guides/2.lifecycle.md)** - Connection management
